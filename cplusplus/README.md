# QbGifBuilder for C++

Example of GIF file generated by QbGifBuilder/ExampleWithQt  
![Example](https://abaquesoftware.com/projects/QbToolbox/QbGifBuilder5.gif)

## API presentation

This API generates GIF files (static or animated images).  
This API can be used in stand-alone mode if you handle only GIF files.  
If you want to insert other kind of images (computed, BMP, JPEG, PNG, ...), you can use a third-party framework like Qt.  
  
A GIF file can be built from a bitmap description (QbGifBitmap) or from stream pointing to a GIF file (static or animated).  
Once the GIF is defined, it can be exported to a stream (usually a file stream).  

Two examples are provided:  
- 'Example' is a project using this API in stand-alone mode.  
- 'ExampleWithQt' is a project showing how to use GbGifBuilder + Qt.  
  
For each of these examples, please refer to 'build.sh' to know the requirements and the compilation options.  
  
## Object: QbGifBuilder

QbGifBuilder provides the following methods:  

  **QbGifBuilder()**  
  Constructor    
  
  **void addFrame(const QbGifBitmap *bitmap)**  
  **void addFrame(const QbGifBitmap *bitmap, int delayInMs)**  
  Add a frame as a Bitmap.  
  
  **void addFrames(istream &gifStream)**  
  **void addFrames(istream &gifStream, int delayInMs)**  
  Add one or several frames from a stream.  
  The stream MUST contain a GIF image (animated or not).  
  
  **void exportGif(ostream &outputStream)**  
  Generate the GIF and write it to outpoutStream.  
  
  **void setDefaultDelayInMs (int delayInMs)**
  Set the default frame delay (if it is not provided).  
  
  **setNbRepetitions (int nbRepetitions)**  
  Set the number of repetitions. (must be between 0 and 65535).  
  
  **setDelayPolicy (QbGifdBuilder::DelayPolicy policy)**  
  Set the policy to compute frame delays when adding animated GIF.  
  QbGuidBuilder::DP_IMAGE_ONLY:  
    Frame delay value will only be applied on image and animated GIF frame delays won't be modified (default).
  QbGuidBuilder::DP_PER_FRAME:  
    The same frame delay will be applied to all frames (images or frames from animated GIF)  
  QbGuidBuilder::DP_GLOBAL:  
    The delay will be applied to the entire animation.  
  

  Notes:
  - If SetDefaultDelayInMs or SetDelayPolicy is called, the change will be only applied to the next append frames.  
  - frame delays must be > 20 ms and < 655350 ms.   
    If a frame delay = 0 -> it will be set to 100 ms  
    If a frame delay is > 0 and < 20 ms -> it will be set to 20 ms  
    If a frame delay is > 655360 ms -> it will be set to 655360 ms   


## Object: QbGifBitmap  

QbGifBitmap represents a 256-color indexed bitmap image.  
Each QbGifBitmap contains the following data:  
  - width, height and 
  - colorTable : It's a table that contains the RGB components of each color (size = 256 x 3).  
  - bitmap : It's a table that contains the colorIndex of each pixel of the image (size = width x height). 

Warning:  
The current version contains a factory (QbGifBitmap::createQbGifBitmaps) that can generate the different QbGifBitmap from 
a stream (usually a GIF file).  
This factory is EXPERIMENTAL.  It only works if the GIF file doesn't use tiles or layers between frames.  
  
